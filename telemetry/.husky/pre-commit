cd telemetry && NODE_OPTIONS=--experimental-strip-types pnpx lint-staged --verbose
# Lint only staged workflow files (lint-staged only sees files under telemetry/)
staged=$(cd "$(git rev-parse --show-toplevel)" && git diff --cached --name-only | grep -E '^.github/workflows/.*\.(yml|yaml)$' || true)
if [ -n "$staged" ]; then
  cd "$(git rev-parse --show-toplevel)" && sh telemetry/scripts/run-actionlint.sh $staged
fi
# Lint staged shell scripts (repo-wide)
staged_sh=$(cd "$(git rev-parse --show-toplevel)" && git diff --cached --name-only | grep -E '\.sh$' || true)
if [ -n "$staged_sh" ]; then
  cd "$(git rev-parse --show-toplevel)" && sh telemetry/scripts/run-shellcheck.sh $staged_sh
fi
